openapi: "3.0.0"
info:
  description: "This is the documentation for the interfaces and routes to the Viral API. https://github.com/aimenhamed/SENG3011_Viral"
  version: "1.0.0"
  title: "Viral API"
servers:
  - url: https://teamviral-api.herokuapp.com/api/v1/
    description: Production server (uses live data)
tags:
  - name: "Articles"
    description: "Everything related to articles"
  - name: "Reports"
    description: "Everything you need to know about reports"
  - name: "Users"
    description: "Interact with our application through an account"
  - name: "Countries"
    description: "Receive information specific to the countries"
paths:
  /search:
    get:
      tags:
        - "Articles"
      summary: "Retrieve articles per a search criteria"
      description: "Retrieve articles based on a criteria provided in the request."
      operationId: "filterArticles"
      parameters:
        - in: header
          name: period_of_interest
          description: The period of time to search through which includes the start and end times.
          schema:
            type: string # stringified json
          required: true
          example: '{"start":"2009-09-23","end":"2021-09-24"}'

        - in: header
          name: location
          description: The location of where the cases were reported.
          schema:
            type: string
          required: true
          example: '"India"'
        - in: header
          name: key_terms
          description: Key search terms that our database can query.
          schema:
            type: "string"
            items:
              type: "string"
          required: true
          example: '["nipah virus"]'

      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Article"
                
        "400":
          "$ref": "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  /articles/dump:
    get:
      tags:
        - "Articles"
      summary: "Retrieve all articles"
      description: "Dumps all articles currently stored in the database. Main text is excluded."
      operationId: "articlesDump"
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  type: "object"
                  properties:
                    articleId:
                      type: "string"
                    url:
                      type: "string"
                    dateOfPublication:
                      type: "string"
                    headline:
                      type: "string"
                    reports:
                      type: "array"
                      items:
                        "$ref": "#/components/schemas/Report"
        "400":
          "$ref": "#/components/responses/BadRequest"
        "500":
          "$ref": "#/components/responses/ServerError"
                

  /articles/{articleId}:
    get:
      tags:
        - "Articles"
      summary: "Retrieves an article matching id"
      description: "Queries the database for an article with identical id"
      operationId: "articlesOne"
      parameters:
        - name: articleId
          in: path
          description: "a UUID representing the article being queried"
          schema:
            type: string
          required: true
          example: "c4ebd485-a22a-4ac3-882b-eec4daabd2b0"
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  "$ref": "#/components/schemas/Article"
        "400":
          "$ref": "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          "$ref": "#/components/responses/ServerError"

  /reports/dump:
    get:
      tags:
        - "Reports"
      summary: "Retrieve all reports"
      description: "Dumps all reports currently stored in the database."
      operationId: "reportDump"
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  "$ref": "#/components/schemas/Report"
        "400":
          "$ref": "#/components/responses/BadRequest"
        "500":
          $ref: "#/components/responses/ServerError"

  /reports/{reportId}:
    get:
      tags:
        - "Reports"
      summary: "Retrieve a report matching id"
      description: "Dumps all reports currently stored in the database."
      operationId: "reportsOne"
      parameters:
        - name: reportId
          in: "path"
          description: "a UUID representing the report being queried"
          schema:
            type: string
          required: true
          example: "8cf91f9d-4484-469e-b668-225ed3bb5006"
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Report"
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  /users/register:
    post:
      tags:
        - "Users"
      summary: "Registers a user"
      description: "Creates new user in database and registers them."
      operationId: "createUser"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                name:
                  type: string
                email:
                  type: string
                password: 
                  type: string
              example:
                name: "Bob"
                email: "bobthebuilder@gmail.com"
                password: "password"
        
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                {
                  type: "object",
                  properties: { 
                    "token":
                      type:"string",
                    "user": { $ref: "#/components/schemas/User" } 
                    
                  },
                }
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  /users/login:
    post:
      tags:
        - "Users"
      summary: "User logs in"
      description: "Logs existing user in."
      operationId: "loginUser"
      requestBody:
        content:
          application/json:
              schema:
                type: "object"
                properties:
                  email:
                    type: string
                  password: 
                    type: string
                example:
                  email: "bobthebuilder@gmail.com"
                  password: "password"

      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                {
                  type: "object",
                  properties: { "user": { $ref: "#/components/schemas/User" } },
                }
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  /users/{userId}:
    get:
      tags:
        - "Users"
      summary: "Retrieve specific user"
      description: "Retrieve specific user."
      operationId: "getUser"
      parameters:
        - name: userId
          in: "path"
          description: "a UUID representing the user being queried"
          schema:
            type: string
          required: true
          example: "7bb72fe5-6b8c-4984-8efc-758322e8c8a2"
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                {
                  type: "object",
                  properties: { "user": { $ref: "#/components/schemas/User" } },
                }
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  /users/bookmark-article:
    put:
      tags:
        - "Users"
      summary: "Bookmarks article under user profile"
      description: "Bookmarks article under user profile."
      operationId: "addArticleToUser"
      requestBody:
        "content":
          {
            "application/json":
              {
                schema:
                  {
                    type: "object",
                    properties:
                      {
                        userId: { type: "string" },
                        articleId: { type: "string" },
                        status: { type: "boolean" },
                      },
                    example:
                      {
                        userId: "7bb72fe5-6b8c-4984-8efc-758322e8c8a2",
                        articleId: "c4ebd485-a22a-4ac3-882b-eec4daabd2b0",
                        status: "true"
                      }
                  },
              },
          }
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              {
                schema:
                  {
                    type: "object",
                    properties:
                      {
                        user: { $ref: "#/components/schemas/User" },
                        article: { $ref: "#/components/schemas/Article" },
                      },
                  },
              }
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"
  /users/bookmark-country:
    put:
      tags:
        - "Users"
      summary: "Bookmarks article under user profile"
      description: "Bookmarks country under user profile."
      operationId: "addCountryToUser"
      requestBody:
        "content":
          {
            "application/json":
              {
                schema:
                  {
                    type: "object",
                    properties:
                      {
                        userId: { type: "string" },
                        countryId: { type: "string" },
                        status: { type: "boolean" },
                      },
                    example:
                      {
                        "userId": "6d04e23f-c19d-4285-a7d1-05eeb6a7fd21",
                        "countryId": "28a36073-6587-4c69-b8f8-f3e3cb22feba",
                        "status": true
                      }
                  },
              },
          }
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              {
                schema:
                  {
                    type: "object",
                    properties:
                      {
                        user: { $ref: "#/components/schemas/User" },
                        country: { $ref: "#/components/schemas/Country" },
                      },
                  },
                example:
                  {
                      "user": {
                          "userId": "6d04e23f-c19d-4285-a7d1-05eeb6a7fd21",
                          "name": "Jack",
                          "email": "jacky123@gmail.com",
                          "bookmarkedArticles": [],
                          "bookmarkedCountries": [
                              {
                                  "countryId": "8894a912-1229-4843-a134-c7ff0cd6d350",
                                  "name": "Russia",
                                  "code": "RU",
                                  "coords": [
                                      60,
                                      100
                                  ]
                              },
                              {
                                  "countryId": "caa9c198-7999-4bec-a085-303ad87aba19",
                                  "name": "Brazil",
                                  "code": "BR",
                                  "coords": [
                                      -10,
                                      -55
                                  ]
                              },
                              {
                                  "countryId": "28a36073-6587-4c69-b8f8-f3e3cb22feba",
                                  "name": "Canada",
                                  "code": "CA",
                                  "coords": [
                                      60,
                                      -95
                                  ]
                              }
                          ]
                      },
                      "country": {
                          "countryId": "28a36073-6587-4c69-b8f8-f3e3cb22feba",
                          "name": "Canada",
                          "code": "CA",
                          "coords": [
                              60,
                              -95
                          ],
                          "advice": {
                              "adviceId": "044e6ff9-0578-4bbe-99fd-e0a2f22c4be5",
                              "url": "https://www.smartraveller.gov.au/destinations/americas/canada",
                              "continent": "Americas",
                              "adviceLevel": "Exercise a high degree of caution",
                              "latestAdvice": "Canada has eased its border measures as part of its transition to the pandemic response. This includes changes to entry restrictions for fully vaccinated travellers and pre-entry testing requirements (see ‘Travel’). The parliament area in Ottawa continues to be cordoned off by police following recent demonstrations. Follow the advice of local authorities and instructions from law enforcement in affected areas (see 'Safety').",
                              "lastUpdate": "2022-03-03"
                          },
                          "comments": [],
                          "reviews": [
                              {
                                  "reviewId": "59a1684b-743a-4993-858b-5f647813f014",
                                  "createdBy": {
                                      "userId": "399fd84b-b77e-4c52-8ac7-011cb7ad89fd",
                                      "name": "abcacb",
                                      "email": "abcacb@email.com"
                                  },
                                  "rating": 2,
                                  "title": "Enjoy canada",
                                  "mainText": "Enjoyed my time in canadatake two",
                                  "date": "2022-04-15T07:45:31.303Z",
                                  "upvotedBy": []
                              }
                          ]
                      },
                      "log": {
                          "teamName": "Team Viral",
                          "dataSource": "https://www.who.int/csr/don/en/",
                          "accessTime": "15:11:00 GMT+1000 (Australian Eastern Standard Time)"
                      }
                  }
              }
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  /advice/all:
    get:
      tags:
        - "Countries"
      summary: "Retrieve the advice level of all countries at risk"
      description: "Countries that are potentially at risk will have their advice level shown here. Countries that are deemed save to travel to will not be included here."
      operationId: "adviceAll"
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  type: "object"
                  properties: 
                    {
                      country: {type: "string"},
                      adviceLevel: {type: "string"}
                    }
                  example: 
                    {
                      country: "Ukraine",
                      adviceLevel: "Do not travel"
                    }
        "500":
          "$ref": "#/components/responses/ServerError"
  
  /country:
    get:
      tags:
        - "Countries"
      summary: "Retrieve specific information on a country at risk"
      description: "Retrieves all relevant information on the country."
      operationId: "adviceSpecific"
      parameters:
      - name: country
        in: "query"
        description: "the name of the country being queried (case sensitive)"
        schema:
          type: string
        required: true
        example: "Ukraine"
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              schema:
                type: "object"
                properties: 
                  {
                    countryRating: { type: "number" },
                    country:
                      {
                        $ref: "#/components/schemas/Country"
                      },
                    data: 
                      {
                        $ref: "#/components/schemas/Advice"
                      },
                    log:
                      {
                        "$ref": "#/components/schemas/Log"
                      }
                  }
                example:
                  countryRating: 0
                  country:
                    countryId: b1b08336-d818-4e09-adbb-08b55895f34b
                    name: Ukraine
                    code: UA
                    coords:
                      - 49
                      - 32
                    advice:
                      adviceId: 84ee17ac-c345-48d8-9c99-1c6c7616c775
                      url: https://www.smartraveller.gov.au/destinations/europe/ukraine
                      continent: Europe
                      adviceLevel: Do not travel
                      latestAdvice: The Russian invasion of Ukraine is ongoing. The security situation continues to be volatile and is deteriorating rapidly. Infrastructure and military facilities have been struck by rocket attacks in Lviv. Heavy fighting, including bombardments, explosions and missile launches, is ongoing throughout Ukraine. There have been many civilian casualties. Foreigners have been killed and may be targeted, including in areas not directly affected by fighting. Do not travel to Ukraine, there is a real risk to life.  If you’re in Ukraine, shelter in place until you judge it’s safe to depart. Seek shelter in a hardened structure away from windows. Review your personal security plans. Be alert and aware of your surroundings. Continue to monitor advice on Smartraveller and reputable local and international media. Where it is safe to do so, you should leave Ukraine. You're responsible for your own safety and that of your family.
                      lastUpdate: '2022-03-30'
                    comments:
                      - commentId: 9d8e5e74-c3c4-4330-8501-80498f5a87d4
                        createdBy:
                          userId: b9485e77-f1ec-41a1-95bd-9433d4919d75
                          name: Jimmy
                          email: jimmy@gmail.com
                        message: yes sir
                        date: '2022-04-03T22:54:04.698Z'
                      - commentId: 82fe4525-5e22-4c81-812a-e55c914fb1bc
                        createdBy:
                          userId: b9485e77-f1ec-41a1-95bd-9433d4919d75
                          name: Jimmy
                          email: jimmy@gmail.com
                        message: YESSIR
                        date: '2022-04-03T22:37:50.489Z'
                      - commentId: 4b704566-4db5-4386-948b-1e0573fd2be1
                        createdBy:
                          userId: b9485e77-f1ec-41a1-95bd-9433d4919d75
                          name: Jimmy
                          email: jimmy@gmail.com
                        message: yeet
                        date: '2022-04-03T22:36:15.342Z'
                      - commentId: dd859075-1b64-4118-a998-b51af8a595d8
                        createdBy:
                          userId: b9485e77-f1ec-41a1-95bd-9433d4919d75
                          name: Jimmy
                          email: jimmy@gmail.com
                        message: yeet
                        date: '2022-04-03T22:30:42.270Z'
                      - commentId: 2d001731-382e-4d59-95ac-4c8fd7b6d32c
                        createdBy:
                          userId: b9485e77-f1ec-41a1-95bd-9433d4919d75
                          name: Jimmy
                          email: jimmy@gmail.com
                        message: help
                        date: '2022-04-03T22:27:29.085Z'
                      - commentId: 9db5cac2-b415-4f0d-aba7-6e64cbe30d94
                        createdBy:
                          userId: b9485e77-f1ec-41a1-95bd-9433d4919d75
                          name: Jimmy
                          email: jimmy@gmail.com
                        message: hi mate
                        date: '2022-04-03T22:25:42.577Z'
                      - commentId: 38377d8d-e897-4002-8434-6e4c152d4b7c
                        createdBy:
                          userId: b9485e77-f1ec-41a1-95bd-9433d4919d75
                          name: Jimmy
                          email: jimmy@gmail.com
                        message: Hello world
                        date: '2022-04-03T22:23:48.346Z'
                    reviews: []
                  data:
                    meta:
                      links:
                        self: https://test.api.amadeus.com/v1/diseases/covid19-area-report?countryCode=UA
                    data:
                      area:
                        name: Ukraine
                        iataCode: UA
                        areaType: Country
                      summary: <p>Health authorities confirmed the first case of COVID-19 in Chernivtsi on 3 March 2020, after a patient who had recently travelled to Italy tested positive for the virus. Most restrictions have been lifted and the country is open to international travel. Despite a fall in incidence rates, hundreds of new cases continue to be reported daily.</p>
                      diseaseRiskLevel: Medium
                      diseaseInfection:
                        date: '2021-09-05'
                        level: Medium
                        rate: 52.9
                        infectionMapLink: https://covid19.rnbo.gov.ua/?fbclid=IwAR1TXauFhOd3A9iOgaRCiZ27py5Ngz2hmDkaVuZj_7U-Oe3ejIQn34wBT9I
                      diseaseCases:
                        date: '2021-06-22'
                        deaths: 54220
                        confirmed: 2292295
                      dataSources:
                        covidDashboardLink: https://covid19.gov.ua/analitichni-paneli-dashbordy
                        healthDepartementSiteLink: https://moz.gov.ua/koronavirus-2019-ncov
                        governmentSiteLink: https://covid19.gov.ua/en
                      areaRestrictions:
                        - date: '2021-09-07'
                          text: <p>On 20 February 2020, at least 10 people were detained after residents of Novi Sanzhary, Poltava oblast, blocked the Poltava-Kremenchuk highway to protest the placement of citizens repatriated from China.</p> <p>Around 2,000 Hasidic Jewish pilgrims, who sought to travel to the city of Uman, rallied at the Novi Yarylovychi checkpoint on the Ukraine-Belarus border on 14 September 2020 to demand passage to Ukraine after Ukrainian authorities refused to allow them entry during the Rosh Hashanah holiday.</p> <p>Multiple demonstrations have been held in Kyiv, Kharkiv and other urban hubs over COVID-19-related restrictions and the economic impact of the pandemic.</p>
                          restrictionType: 'Demonstrations and Unrest '
                        - date: '2021-09-07'
                          text: <p>President Volodymyr Zelensky announced on 9 November 2020 that he tested positive for COVID-19.</p> <p>On 17 December 2020, Kharkiv mayor Hennadiy Kernes died from COVID-19 complications after contracting the virus in September.</p>
                          restrictionType: Political Developments
                      areaAccessRestriction:
                        transportation:
                          date: '2021-09-12'
                          text: <p>Ukraine International Airlines (UIA) and other airlines are operating limited international flights primarily through Kyiv Boryspil International Airport (KBP/UKBB) and Kyiv International Airport (IEV/UKKK).</p>
                          transportationType: FLIGHT
                          isBanned: 'No'
                        declarationDocuments:
                          date: '2021-09-06'
                          text: <p>Foreign nationals must purchase health insurance that will be valid during their stay in Ukraine and cover the cost of COVID-19 treatment. Health insurance can be purchased on <a href="https://visitukraine.today/" target="_blank" rel="noopener">https://visitukraine.today/</a>.</p>
                          documentRequired: 'Yes'
                          healthDocumentationLink: https://visitukraine.today/
                        entry:
                          date: '2021-09-06'
                          text: <p>Foreign travellers are permitted entry with proof of a negative test result, recovery or vaccination against COVID-19. A valid health insurance is required for entry.</p>
                          ban: 'No'
                          rules: https://visitukraine.today/
                          borderBan:
                            - borderType: maritimeBorderBan
                              status: Open
                            - borderType: landBorderBan
                              status: Open
                        diseaseTesting:
                          date: '2021-09-06'
                          text: <p><strong>Before travel</strong></p><p>Unvaccinated foreign nationals - excluding permanent residency permit holders - are required to present a negative PCR or rapid antigen test that was taken within 72 hours before entry.</p><p><strong>After arrival</strong></p><p>Unvaccinated travellers must take a new COVID-19 test within 72 hours after entry to end self-quarantine.</p>
                          isRequired: 'Yes'
                          when: Before travel, After arrival
                          requirement: Mandatory
                          rules: https://visitukraine.today/
                          testType: PCR, Antigen
                          minimumAge: 12
                          validityPeriod:
                            delay: P72H
                            referenceDateType: Arrival
                        tracingApplication:
                          date: '2021-09-02'
                          text: <p>While Ukraine does not have a contact tracing app, unvaccinated travellers must undergo self-quarantine with the Vdoma mobile app, unless they obtain a negative test result for COVID-19 within 72 hours of arrival.</p>
                          isRequired: 'No'
                          iosUrl:
                            - https://apps.apple.com/us/app/%D0%B2%D0%B4%D0%BE%D0%BC%D0%B0/id1504695512
                          androidUrl:
                            - https://play.google.com/store/apps/details?id=ua.gov.diia.quarantine&hl=en_US&gl=US
                        quarantineModality:
                          date: '2021-09-02'
                          text: <p>Unvaccinated travellers who arrive from or stayed in India or Russia within the past seven days must quarantine for 14 days. The quarantine period cannot be shortened.</p> <p>Unvaccinated travellers arriving from other countries must obtain a negative COVID-19 test result within 72 hours after arrival or self-quarantine for 10 days.</p>
                          eligiblePerson: None
                          quarantineType: Self
                          duration: 14
                          rules: https://visitukraine.today/
                          quarantineOnArrivalAreas:
                            - iataCode: IN
                              areaType: country
                            - iataCode: RU
                              areaType: country
                        mask:
                          date: '2021-09-13'
                          text: <p>A face mask covering the mouth and nose must be worn inside public buildings and on public transport. The requirement to wear face masks on public transport extends to airports, including Kyiv Boryspil International Airport. UIA passengers must wear face masks at the airport and on board the aircraft.</p>
                          isRequired: 'Yes'
                        exit:
                          date: '2021-09-07'
                          text: <p>There are no special requirements to exit the country.</p>
                          specialRequirements: 'No'
                          isBanned: 'No'
                        otherRestriction:
                          date: '2021-09-07'
                        diseaseVaccination:
                          date: '2021-09-02'
                          text: <p>Travellers with proof of full vaccination against COVID-19 are exempt from testing and quarantine. The vaccine must be approved by the World Health Organization (WHO) for emergency use.</p> <p>Ukrainian nationals who have been vaccinated in Ukraine can obtain a vaccination certificate through the Diia mobile app (<a href="https://diia.gov.ua/" target="_blank" rel="noopener">https://diia.gov.ua/</a>). The certificate will be valid for 180 days.</p>
                          isRequired: 'No'
                          referenceLink: https://visitukraine.today/
                          acceptedCertificates:
                            - EU Digital COVID Certificate
                            - ' Ukraine certificate'
                          qualifiedVaccines:
                            - Pfizer - 14 days after second dose.
                            - AstraZeneca (Vaxzevria) - 14 days after second dose.
                            - AstraZeneca (South Korea) - 14 days after second dose.
                            - AstraZeneca (India) - 14 days after second dose.
                            - Johnson & Johnson - 14 days after first dose.
                            - Sinopharm Phase 1 - 14 days after second dose.
                            - Sinovac - 14 days after second dose.
                            - Moderna - 14 days after second dose.
                          policy: 'Yes'
                          exemptions: Testing, Quarantine
                      areaPolicy:
                        date: '2021-09-05'
                        text: <p>Regions are colour-coded 'green', 'yellow', 'orange' or 'red' based on the level of COVID-19 risk, with 'red' regions subject to the most restrictive measures.</p> <p>The country is open to international travel.</p>
                        status: Partial Measures
                        startDate: '2021-02-24'
                        endDate: '2021-10-01'
                        referenceLink: https://visitukraine.today/
                      relatedArea:
                        - methods:
                            - GET
                          rel: Parent
                      areaVaccinated:
                        - date: '2021-09-04'
                          vaccinationDoseStatus: oneDose
                          percentage: 12.734
                        - date: '2021-09-10'
                          vaccinationDoseStatus: fully
                          percentage: 10.88
                      type: covid19-area-report
                  log:
                    teamName: Team Viral
                    dataSource: https://www.who.int/csr/don/en/
                    accessTime: 14:54:17 GMT+1000 (Australian Eastern Standard Time)
                    
              
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          "$ref": "#/components/responses/ServerError" 
          
  /country/flights:
    get:
      tags:
        - "Countries"
      summary: "Get flight information"
      description: "Returns information available one-way flights with only one plane"
      operationId: "countryFlights"
      parameters:
      - name: originLocationCode
        in: "query"
        description: "The start airport location"
        schema:
          type: string
        required: true
        example: "SYD"
      - name: destinationLocationCode
        in: "query"
        description: "The destination airport location"
        schema:
          type: string
        required: true
        example: "BKK" 
      - name: departureDate
        in: "query"
        description: "The latest day to depart"
        schema:
          type: string
        required: true
        example: "2021-11-01" 
      - name: adults
        in: "query"
        description: "The number of adults attending"
        schema:
          type: number
        required: true
        example: "1"
      responses:
        200:
          description: "Successful response"
          content:
            application/json:
              schema:
                type: "object"
                properties: 
                  flights:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        departure:
                          type: string
                        arrival:
                          type: string
                        duration:
                          type: string
                        departureTime:
                          type: string
                        arrivalTime:
                          type: string
                        carrierCode:
                          type: string
                        currency:
                          type: string
                        price:
                          type: string
                  log:
                    "$ref": "#/components/schemas/Log"
                example:
                  flights:
                    - departure: SYD
                      arrival: BKK
                      duration: PT9H25M
                      departureTime: '2022-11-01T10:00:00'
                      arrivalTime: '2022-11-01T15:25:00'
                      carrierCode: TG
                      currency: EUR
                      price: '413.87'
                    - departure: SYD
                      arrival: BKK
                      duration: PT9H40M
                      departureTime: '2022-11-01T10:30:00'
                      arrivalTime: '2022-11-01T16:10:00'
                      carrierCode: EK
                      currency: EUR
                      price: '468.03'
                    - departure: SYD
                      arrival: BKK
                      duration: PT9H40M
                      departureTime: '2022-11-01T10:30:00'
                      arrivalTime: '2022-11-01T16:10:00'
                      carrierCode: QF
                      currency: EUR
                      price: '596.03'
                  log:
                    teamName: Team Viral
                    dataSource: https://www.who.int/csr/don/en/
                    accessTime: 15:46:49 GMT+1000 (Australian Eastern Standard Time)
                  
                        
                        
  /comments:
    post:
      tags:
        - "Countries"
      summary: "Create a comment in a country page"
      description: "Create a public message in a country page."
      operationId: "commentPost"
      requestBody:
        content: {
          "application/json":
              {
                schema:
                  {
                    type: "object",
                    properties:
                      {
                        userId: { type: "string" },
                        countryId: { type: "string" },
                        message: { type: "string" }
                      },
                    example:
                      {
                        "userId": "11db4e8a-b16a-4667-a5e7-09a6598fbbab",
                        "countryId": "612532d9-8661-4a3f-85b4-77e5322294cb",
                        "message": "aabababababa"
                      }
                  },
              },
        }
      responses:
        200:
          description: "Successful response"
          content:
            application/json:
              schema:
                type: "object"
                properties: 
                  {
                    comment: 
                      {
                        "$ref": "#/components/schemas/Comment"
                      },
                    log:
                      {
                        "$ref": "#/components/schemas/Log"
                      }
                  }
                example:
                  {
                    
                    "comment": {
                        "commentId": "48d79785-ea92-45a7-80b6-a2c737697716",
                        "createdBy": {
                            "userId": "11db4e8a-b16a-4667-a5e7-09a6598fbbab",
                            "name": "Aimen",
                            "email": "HiAimen@gmail.com",
                            "bookmarkedArticles": [],
                            "bookmarkedCountries": []
                        },
                        "country": {
                            "countryId": "612532d9-8661-4a3f-85b4-77e5322294cb",
                            "name": "Afghanistan",
                            "code": "AF",
                            "coords": [
                                33,
                                65
                            ]
                        },
                        "message": "aabababababa",
                        "date": "2022-04-01T12:07:56.885Z"
                    },
                    "log": {
                        "teamName": "Team Viral",
                        "dataSource": "https://www.who.int/csr/don/en/",
                        "accessTime": "23:07:57 GMT+1100 (Australian Eastern Daylight Time)"
                    }
                  
                  }
  /reviews:
    post:
      tags: 
        - "Countries"
      summary: "Write a review"
      description: "Posts a review for a specific country page. Only one review is allowed per country."
      operationId: "ReviewPost"
      requestBody:
        content:
          application/json:
              schema:
                type: "object"
                properties:
                  {
                    "userId": { type: "string" },
                    "countryId": { type: "string" },
                    "rating": {type:  "number"},
                    "title": { type: "string" },
                    "mainText": { type: "string" },
                  }
                example:
                  {
                    "userId": "c0baa174-4c29-4efa-b25d-a1456898fea0",
                    "countryId": "c5f25731-4923-4048-a247-1d3f284a9b78",
                    "rating": 4.5,
                    "title": "10/10 would trip again",
                    "mainText": "the things was pretty good yes"
                  }
          
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              {
                schema:
                  {
                    type: "object",
                    properties:
                      {
                        review: { $ref: "#/components/schemas/Review" },
                      },
                    example:
                      {
                          "review": {
                              "reviewId": "3e663ecf-5c88-4d46-a312-db9c8a470de5",
                              "createdBy": {
                                  "userId": "c0baa174-4c29-4efa-b25d-a1456898fea0",
                                  "name": "aff",
                                  "email": "aff"
                              },
                              "country": {
                                  "countryId": "c5f25731-4923-4048-a247-1d3f284a9b78",
                                  "name": "Japan",
                                  "code": "JP",
                                  "coords": [
                                      36,
                                      138
                                  ]
                              },
                              "rating": 4.5,
                              "title": "10/10 would trip again",
                              "mainText": "the things was pretty good yes",
                              "date": "2022-04-23T05:23:17.366Z",
                              "upvotedBy": []
                          },
                          "log": {
                              "teamName": "Team Viral",
                              "dataSource": "https://www.who.int/csr/don/en/",
                              "accessTime": "15:23:18 GMT+1000 (Australian Eastern Standard Time)"
                          }
                      }
                  },
              }
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"  
    delete:
      tags:
        - "Countries"
      summary: "Deletes a review"
      description: "Deletes the specified review."
      operationId: "ReviewDelete"
      requestBody:
        content:
          application/json:
              schema:
                type: "object"
                properties:
                  {
                    "userId": { type: "string" },
                    "reviewId": { type: "string" }
                  }
                example:
                  {
                    "userId": "97593987-225d-46cb-9f51-167eb833a76d",
                    "reviewId": "a2cb5631-7bb0-4f8f-a3a0-b23be4323f5f"
                  }
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              {
                schema:
                  {
                    type: "object",
                    properties:
                      {
                        log: {"$ref": '#/components/schemas/Log'}
                      },
                    example:
                      {
                        "log": {
                            "teamName": "Team Viral",
                            "dataSource": "https://www.who.int/csr/don/en/",
                            "accessTime": "15:23:18 GMT+1000 (Australian Eastern Standard Time)"
                        }
                      }
                  },
              }
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"
  /reviews/upvote:
    put:
      tags:
        - "Countries"
      summary: "Upvote a review"
      description: "Upvote a review. A user can only upvote a review once."
      operationId: "ReviewUpvote"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                {
                  "userId": { type: "string" },
                  "reviewId": { type: "string" },
                  "status": { type: "boolean" }
                }
              example:
                {
                  "userId": "2dc16059-7614-4532-84e6-4511bf06f07d",
                  "reviewId": "cd2d6db5-27b2-48ae-9838-af1bea769f74",
                  "status": "true"
                }
      responses:
        "200":
          description: "Successful response"
          content:
            application/json:
              {
                schema:
                  {
                    type: "object",
                    properties:
                      {
                        review: { $ref: "#/components/schemas/Review" },
                        log: {$ref: "#/components/schemas/Log"  }
                      },
                    example:
                      {
                        "review": {
                          "reviewId": "3e663ecf-5c88-4d46-a312-db9c8a470de5",
                          "createdBy": {
                              "userId": "c0baa174-4c29-4efa-b25d-a1456898fea0",
                              "name": "aff",
                              "email": "aff"
                          },
                          "country": {
                            "countryId": "c5f25731-4923-4048-a247-1d3f284a9b78",
                            "name": "Japan",
                            "code": "JP",
                            "coords": [
                                36,
                                138
                            ]
                          },
                          "rating": 4.5,
                          "title": "10/10 would trip again",
                          "mainText": "the things was pretty good yes",
                          "date": "2022-04-23T05:23:17.366Z",
                          "upvotedBy": []
                        },
                        "log": {
                          "teamName": "Team Viral",
                          "dataSource": "https://www.who.int/csr/don/en/",
                          "accessTime": "15:23:18 GMT+1000 (Australian Eastern Standard Time)"
                        }
                      }
                  },
              }
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          "$ref": "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"  
          
components:
  responses:
    BadRequest:
      description: "The request was not formed with correct inputs."
      content:
        application/json:
          schema:
            type: "object"
            properties:
              errorCode:
                type: "integer"
                example: 400
              errorMessage:
                type: "string"
                example: "Bad request"
    NotFound:
      description: "The requested resource was not found"
      content:
        application/json:
          schema:
            type: "object"
            properties:
              errorCode:
                type: "integer"
                example: 404
              errorMessage:
                type: "string"
                example: "Not found"
    ServerError:
      description: "Internal server error"
      content:
        application/json:
          schema:
            type: "object"
            properties:
              errorCode:
                type: "integer"
                example: 500
              errorMessage:
                type: "string"
                example: "Internal server error"
  schemas:
    Period:
      type: "object"
      properties:
        start:
          type: "string"
          description: "Start time"
        end:
          type: "string"
          description: "End time"
      xml:
        name: "Period"
    Report:
      type: "object"
      properties:
        reportId:
          type: "string"
        diseases:
          type: "array"
          items:
            type: "string"
        syndromes:
          type: "array"
          items:
            type: "string"
        eventDate:
          type: "string"
        locations:
          type: "array"
          items:
            type: "string"
    Article:
      type: "object"
      properties:
        articleId:
          type: "string"
        url:
          type: "string"
        dateOfPublication:
          type: "string"
        headline:
          type: "string"
        mainText:
          type: "string"
        reports:
          type: "array"
          items:
            "$ref": "#/components/schemas/Report"
    User:
      type: "object"
      properties:
        userId:
          type: "string"
        name:
          type: "string"
        email:
          type: "string"
        bookmarkedArticles:
          type: "array"
          items:
            "$ref": "#/components/schemas/Article"
        bookmarkedCountries:
          type: "array"
          items:
            "$ref": "#/components/schemas/Country"
    Country:
      type: "object"
      properties:
        countryId:
          type: "string"
        name:
          type: "string"
        code:
          type: "string"
        coords:
          type: "array"
          minItems: 2
          maxItems: 2
          items:
            type: "number"
        advice:
          "$ref": "#/components/schemas/Advice" 
        comments:
          type: "array"
          items:
            "$ref": "#/components/schemas/Comment"
    Advice:
      type: "object"
      properties:
        adviceId: 
          type: "string"
        url:
          type: "string"
        country: 
          "$ref": "#/components/schemas/Country"
        continent:
          type: "string"
        adviceLevel:
          type: "string"
        latestAdvice:
          type: "string"
        lastUpdate:
          type: "string"
    Comment:
      type: "object"
      properties:
        commentId: 
          type: "string"
        createdBy:
          "$ref": "#/components/schemas/User"
        country: 
          "$ref": "#/components/schemas/Country"
        message:
          type: "string"
        date:
          type: "string"
    Review:
      type: "object"
      properties:
        reviewId:
          type: string
        createdBy:
          "$ref": "#/components/schemas/User"
        rating:
          type: "number"
        title:
          type: "string"
        mainText:
          type: "string"
        date:
          type: "string"
        upvotedBy:
          type: "array"
          items:
            "$ref": "#/components/schemas/User"
    Log:
      type: "object"
      properties:
        teamName: 
          type: "string"
        dataSource:
          type: "string"
        accessTime:
          type: "string"